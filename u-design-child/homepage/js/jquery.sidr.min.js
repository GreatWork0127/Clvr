/*! Sidr - v1.1.1 - 2013-03-14
 * https://github.com/artberri/sidr
 * Copyright (c) 2013 Alberto Varela; Licensed MIT */
(function (e) {
    var t = !1,
        n = !1,
        r = {
            isUrl: function (e) {
                var t = RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?jQuery", "i");
                return t.test(e) ? !0 : !1
            },
            loadContent: function (e, t) {
                e.html(t)
            },
            addPrefix: function (e) {
                var t = e.attr("id"),
                    n = e.attr("class");
                "string" == typeof t && "" !== t && e.attr("id", t.replace(/([A-Za-z0-9_.\-]+)/g, "sidr-id-jQuery1")), "string" == typeof n && "" !== n && "sidr-inner" !== n && e.attr("class", n.replace(/([A-Za-z0-9_.\-]+)/g, "sidr-class-jQuery1")), e.removeAttr("style")
            },
            execute: function (r, s, o) {
                "function" == typeof s ? (o = s, s = "sidr") : s || (s = "sidr");
                var u, a, f, l = e("#" + s),
                    c = e(l.data("body")),
                    h = e("html"),
                    p = l.outerWidth(!0),
                    d = l.data("speed"),
                    v = l.data("side");
                if ("open" === r || "toogle" === r && !l.is(":visible")) {
                    if (l.is(":visible") || t) return;
                    if (n !== !1) return i.close(n, function () {
                        i.open(s)
                    }), void 0;
                    t = !0, "left" === v ? (u = {
                        left: p + "px"
                    }, a = {
                        left: "0px"
                    }) : (u = {
                        right: p + "px"
                    }, a = {
                        right: "0px"
                    }), jQuery(".wrapper").css("position", "fixed"), f = h.scrollTop(), h.css("overflow-x", "hidden").scrollTop(f), c.css({
                        width: c.width(),
                        position: "absolute"
                    }).animate(u, d), l.css("display", "block").animate(a, d, function () {
                        t = !1, n = s, "function" == typeof o && o(s)
                    })
                } else {
                    if (!l.is(":visible") || t) return;
                    t = !0, "left" === v ? (u = {
                        left: 0
                    }, a = {
                        left: "-" + p + "px"
                    }) : (u = {
                        right: 0
                    }, a = {
                        right: "-" + p + "px"
                    }), jQuery(".wrapper").css("position", "relative"), f = h.scrollTop(), h.removeAttr("style").scrollTop(f), c.animate(u, d), l.animate(a, d, function () {
                        l.removeAttr("style"), c.removeAttr("style"), e("html").removeAttr("style"), t = !1, n = !1, "function" == typeof o && o(s)
                    })
                }
            }
        }, i = {
            open: function (e, t) {
                r.execute("open", e, t)
            },
            close: function (e, t) {
                r.execute("close", e, t)
            },
            toogle: function (e, t) {
                r.execute("toogle", e, t)
            }
        };
    e.sidr = function (t) {
        return i[t] ? i[t].apply(this, Array.prototype.slice.call(arguments, 1)) : "function" != typeof t && "string" != typeof t && t ? (e.error("Method " + t + " does not exist on jQuery.sidr"), void 0) : i.toogle.apply(this, arguments)
    }, e.fn.sidr = function (t) {
        var n = e.extend({
            name: "sidr",
            speed: 200,
            side: "right",
            source: null,
            renaming: !0,
            body: "body"
        }, t),
            s = n.name,
            u = e("#" + s);
        if (0 === u.length && (u = e("<div />").attr("id", s).appendTo(e("body"))), u.addClass("sidr").addClass(n.side).data({
            speed: n.speed,
            side: n.side,
            body: n.body
        }), "function" == typeof n.source) {
            var a = n.source(s);
            r.loadContent(u, a)
        } else if ("string" == typeof n.source && r.isUrl(n.source)) e.get(n.source, function (e) {
            r.loadContent(u, e)
        });
        else if ("string" == typeof n.source) {
            var f = "",
                l = n.source.split(",");
            if (e.each(l, function (t, n) {
                f += '<div class="sidr-inner">' + e(n).html() + "</div>"
            }), n.renaming) {
                var c = e("<div />").html(f);
                c.find("*").each(function (t, n) {
                    var i = e(n);
                    r.addPrefix(i)
                }), f = c.html()
            }
            r.loadContent(u, f)
        } else null !== n.source && e.error("Invalid Sidr Source");
        return this.each(function () {
            var t = e(this),
                n = t.data("sidr");
            n || (t.data("sidr", s), t.click(function (e) {
                e.preventDefault(), i.toogle(s)
            }))
        })
    }
})(jQuery)